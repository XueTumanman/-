- [1. 处理机管理](#1-处理机管理)
  - [1.1. 进程控制](#11-进程控制)
  - [1.2. 进程同步](#12-进程同步)
    - [1.2.1. 进程互斥](#121-进程互斥)
    - [1.2.2. 进程同步](#122-进程同步)
  - [1.3. 进程通信](#13-进程通信)
  - [1.4. 进程调度](#14-进程调度)
    - [1.4.1. 作业调度](#141-作业调度)
    - [1.4.2. 进程调度](#142-进程调度)
- [2. 存储管理](#2-存储管理)
  - [2.1. 内存分配](#21-内存分配)
  - [2.2. 内存保护](#22-内存保护)
  - [2.3. 内存扩展](#23-内存扩展)
    - [2.3.1. 内存扩展机制](#231-内存扩展机制)
  - [2.4. 地址映射](#24-地址映射)
- [3. 设备管理](#3-设备管理)
  - [3.1. 缓冲管理](#31-缓冲管理)
    - [3.1.1. 缓冲机制](#311-缓冲机制)
  - [3.2. 设备分配](#32-设备分配)
  - [3.3. 设备处理](#33-设备处理)
- [4. 文件管理](#4-文件管理)
  - [4.1. 文件存储空间的管理](#41-文件存储空间的管理)
  - [4.2. 目录管理](#42-目录管理)
  - [4.3. 文件的读写管理和保护](#43-文件的读写管理和保护)
    - [4.3.1. 读写管理](#431-读写管理)
    - [4.3.2. 文件保护](#432-文件保护)

# 1. 处理机管理

**说明**
1. 可归结为对进程的管理
2. 处理机的【分配，运行】都是以进程为单位的

**功能**
1. 【创建，撤销】进程
2. 对各个进程的运行进行协调
3. 实时进程的信息交换
4. 按照算法把处理机分配给进程

## 1.1. 进程控制

**说明**
1. 为每道作业创建多个进程
2. 进程结束时，撤销进程，回收资源
3. 控制进程运行时的状态转换

## 1.2. 进程同步

### 1.2.1. 进程互斥

**说明**
1. 互斥方式，访问临界资源

### 1.2.2. 进程同步

**说明**
1. 完成共同任务的多个进程，同步机构协调他们的执行次序

## 1.3. 进程通信

**说明**
1. 实现合作进程之间的信息交换（同一 OS 中，通常直接通信）

**直接通信**
1. 原进程利用发送命令将消息挂到目标队列上

## 1.4. 进程调度

### 1.4.1. 作业调度

**说明**
1. 后备队列，算法选出，分配资源，调入内存，创建进程，形成就绪进程，插入就绪队列

### 1.4.2. 进程调度

**说明**
1. 就绪队列，算法选出，分配处理机，设置运行现场，投入执行

# 2. 存储管理

## 2.1. 内存分配

**说明**
1. 为每道程序分配内存
2. 减少不可用内存，提高利用率
3. 允许程序申请的附加内存空间，适应内存的动态增长

- ### 静态分配

  **说明**
  1. 作业装入时确定内存空间
  2. 程序运行期间不可【申请，移动】内存空间

- ### 动态分配

  **说明**
  1. 作业装入时确定内存空间
  2. 程序运行期间可以【申请，移动】内存空间

## 2.2. 内存保护

**说明**
1. 确保每道程序都在自己内存中运行，互不干扰
2. 不允许用户程序访问 OS 的【程序，数据】
3. 不允许用户程序转移到非共享的其他用户程序中

## 2.3. 内存扩展

**说明**
1. 借助虚拟技术，逻辑上扩展内存

### 2.3.1. 内存扩展机制

- #### 请求调入功能

  **说明**
  1. 只需部分【程序，数据】就能运行
  2. 运行期间需要继续装入【程序，数据】，向 OS 请求，由 OS 装入

- #### 置换功能

  **说明**
  1. 内存中缺少空间装入【程序，数据】
  2. 将一部分暂时不用的【程序，数据】调至硬盘

## 2.4. 地址映射

**说明**
1. 地址空间的逻辑地址 $\to$ 内存空间的物理地址
2. 应由硬件支持下完成

# 3. 设备管理

**说明**
1. 完成用户请求，分配设备
2. 提高设备利用率

## 3.1. 缓冲管理

**说明**
1. 在 I/O 和 CPU 之间引入缓冲，解决二者速度不平衡问题
2. 提高 CPU 利用率
3. 提高 OS 吞吐率

### 3.1.1. 缓冲机制

- 单缓冲机制
- 双缓冲机制（双向同步传数据）
- 公用缓冲机制（多设备同时使用）

## 3.2. 设备分配

**说明**
1. 根据【I/O 请求，OS 现有资源，分配策略】分配所需设备
2. 如果：I/O 设备和 CPU 之间有【设备控制器，I/O 通道】
    那么：还需为分配出去的设备分配相应的【控制器，通道】
3. 实现设备分配：设置【设备控制表，控制器控制表】，记录【设备，控制器】的【标识符，状态】

## 3.3. 设备处理

**说明**
1. = 设备驱动程序，实现 CPU 和设备控制器之间的通信
2. 对于设置了通道的 OS，还能根据 I/O 请求，自动构成通道程序

**设备处理过程**
1. 检查 I/O 请求的合法性，了解设备是否空闲
2. 读取传递参数，读取设备的工作方式
3. 向设备控制器发出 I/O 命令
4. 启动 I/O 设备完成指定 I/O 操作

# 4. 文件管理

**说明**
1. 对【用户文件，系统文件】进行管理，方便用户使用，保证文件安全性

## 4.1. 文件存储空间的管理

**说明**
1. 为每个文件分配必要的外存空间，提高内存利用率，提高文件的存取速度
2. 设置相应数据结构，记录文件存储空间的使用情况
3. 对存储空间【分配，回收】

## 4.2. 目录管理

**说明**
1. 为每个文件建立一个目录项
2. 有效组织文件目录项，实现方便的索引
3. 实现文件共享

## 4.3. 文件的读写管理和保护

### 4.3.1. 读写管理

**说明**
1. 根据用户请求，从外存读写数据

**读写过程**
1. 根据文件名检索文件目录，获取文件在外存中的位置
2. 利用读写指针，对文件进行读写
3. 读写完成，修改指针，准备下次读写
4. 读写共用一个指针，不会同时进行

### 4.3.2. 文件保护

**说明**
1. 存取文件要经过审核
2. 防止冒名顶替存取文件
3. 防止不正确方式使用文件